<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:include="include :: header('机构及组')"/>
</head>

<body>
<div class="row">
    <div class="col-xs-3">
        <div class="box">
            <div class="box-header">
                <form id="search">
                    <input type="search" placeholder="搜索（回车搜索）" class="form-control" id="enter"/>
                </form>
            </div>
            <div class="box-body">
                <div class="ibox-content">
                    <ul id='treeDemo' style="padding-left: 0"></ul>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-9">
        <div class="container-m">
            <div class="title">宣教部</div>
            <ul class="tag2" id="tabChange">
                <li class="active">组</li>
                <li>组织架构</li>
                <li>岗位</li>
            </ul>
            <div class="part">
                <div class="item">
                    <div class="flex-between row">
                        <div class="flex-around col-md-6">
                            <button type="button" id="addGroup" class="btn btn-primary mar16">新增组</button>
                            <div class="input-group" style="width: 100%">
                                <input type="text" class="form-control" id="searchText" placeholder="请输入名称进行搜索">
                                <span class="input-group-btn">
                <button class="btn btn-primary" type="button" id="searchBtn">搜索</button>
              </span>
                            </div>
                        </div>
                        <div class="flex-around col-md-6 " style="display: flex; justify-content: flex-end">
                            <div class="btn-group mar16">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    导入 <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">导入文件</a></li>
                                    <li><a href="#">模板下载</a></li>
                                </ul>
                            </div>
                            <div class="btn-group mar16">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    导出 <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">勾选导出</a></li>
                                    <li><a href="#">全部导出</a></li>
                                    <li><a href="#">分页导出</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <table class="table table-striped" id="examplePagination">
                    </table>
                </div>
                <div class="item" style="display: none;">
                    <div class="flex-between">
                        <div class="flex-around">
                            <button type="button" class="btn btn-primary mar16" id="addDepartment">新增部门</button>
                            <div class="input-group">
                                <input type="text" class="form-control" id="departmentSearchTxt"
                                       placeholder="请输入名称进行搜索">
                                <span class="input-group-btn">
                <button class="btn btn-primary" id="departmentSearch" type="button">搜索</button>
              </span>
                            </div>
                        </div>
                        <div class="flex-around">
                            <div class="btn-group mar16">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    导入 <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">导入文件</a></li>
                                    <li><a href="#">模板下载</a></li>
                                </ul>
                            </div>
                            <div class="btn-group">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    导出 <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">勾选导出</a></li>
                                    <li><a href="#">全部导出</a></li>
                                    <li><a href="#">分页导出</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <table class="table table-striped" id="departmentTable">

                    </table>
                </div>
                <div class="item" style="display: none;">
                    <div class="flex-between">
                        <div class="flex-around">
                            <button type="button" id="addPost" class="btn btn-primary mar16">新增岗位</button>
                            <div class="input-group">
                                <input type="text" class="form-control" id="postSearchText" placeholder="请输入名称进行搜索">
                                <span class="input-group-btn">
                <button class="btn btn-primary" id="postSearch" type="button">搜索</button>
              </span>
                            </div>
                        </div>
                        <div class="flex-around">
                            <div class="btn-group mar16">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    导入 <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">导入文件</a></li>
                                    <li><a href="#">模板下载</a></li>
                                </ul>
                            </div>
                            <div class="btn-group">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    导出 <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">勾选导出</a></li>
                                    <li><a href="#">全部导出</a></li>
                                    <li><a href="#">分页导出</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <table class="table table-striped" id="postTable">

                    </table>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- 组模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <input type="hidden" id="groupId"/>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    组
                </h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="selectDeptIds1">归属部门</label>
                    <div>
                        <input type="hidden" id="selectDeptIds1">
                        <input type="text" class="form-control" id="selectDept1" onclick="toShowDepartmentModal(1)"
                               readonly placeholder="请选择部门">
                    </div>
                </div>
                <div class="form-group">
                    <label for="selectDeptIds1">父组名称</label>
                    <div>
                        <input type="hidden" id="selectParentsGroupIds">
                        <input type="text" class="form-control" id="selectParentsGroups" onclick="toShowGroupModal()"
                               readonly placeholder="请选择部门">
                    </div>
                </div>
                <div class="form-group">
                    <span class="text-danger">*</span>
                    <label for="groupName">组名称:</label>
                    <input id="groupName" type="text" class="form-control" maxlength="20" placeholder="请输入组名称">
                </div>
                <div class="form-group">
                    <label for="sort">序号:</label>
                    <input id="sort" type="text" class="form-control" maxlength="20" placeholder="请输入组序号">
                </div>
                <div class="form-group">
                    <label for="status">是否启用:</label>
                    <input type="checkbox" id="status" name="my-checkbox" data-on-text="启用" data-off-text="不启用">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary" id="saveBtn">
                    提交
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<!-- 部门模态框（Modal） -->
<div class="modal fade" id="departmentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <input type="hidden" id="departmentId"/>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="departmentModalLabel">
                    部门
                </h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="selectDeptIds2">父级部门</label>
                    <div>
                        <input type="hidden" id="selectDeptIds2">
                        <input type="text" class="form-control" id="selectDept2" onclick="toShowDepartmentModal(2)"
                               readonly placeholder="请选择部门">
                    </div>
                </div>
                <div class="form-group">
                    <span class="text-danger">*</span>
                    <label for="departmentName">部门名称:</label>
                    <input id="departmentName" type="text" class="form-control" maxlength="20" placeholder="请输入部门名称">
                </div>
                <div class="form-group">
                    <label for="departmentSort">序号:</label>
                    <input id="departmentSort" type="text" class="form-control" maxlength="20" placeholder="请输入组序号">
                </div>
                <div class="form-group">
                    <label for="protectUser" class="col-sm-2 control-label">部门主管</label>
                    <div>
                        <input type="hidden" id="protectUserId">
                        <input type="text" readonly class="form-control" id="protectUser"
                               onclick="toShowPeople(1)" placeholder="部门主管姓名">
                    </div>
                </div>

                <div class="form-group">
                    <label for="protectUser" class="col-sm-2 control-label">部门分管领导</label>
                    <div>
                        <input type="hidden" id="protectUserId1">
                        <input type="text" readonly class="form-control" id="protectUser1"
                               onclick="toShowPeople(2)" placeholder="部门分管领导姓名">
                    </div>
                </div>
                <div class="form-group">
                    <label for="departmentStatus">是否启用:</label>
                    <input type="checkbox" id="departmentStatus" name="my-checkbox-department" data-on-text="启用"
                           data-off-text="不启用">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary" id="saveDepartmentBtn">
                    提交
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<!-- 岗位模态框（Modal） -->
<div class="modal fade" id="postModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <input type="hidden" id="postId"/>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="postModalLabel">
                    岗位
                </h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="selectDeptIds3">归属部门</label>
                    <div>
                        <input type="hidden" id="selectDeptIds3">
                        <input type="text" class="form-control" id="selectDept3" onclick="toShowDepartmentModal(3)"
                               readonly placeholder="请选择部门">
                    </div>
                </div>
                <div class="form-group">
                    <span class="text-danger">*</span>
                    <label for="postName">岗位名称:</label>
                    <input id="postName" type="text" class="form-control" maxlength="20" placeholder="请输入岗位名称">
                </div>
                <div class="form-group">
                    <span class="text-danger">*</span>
                    <label for="postCode">岗位编码:</label>
                    <input id="postCode" type="text" class="form-control" maxlength="20" placeholder="请输入岗位编码">
                </div>
                <div class="form-group">
                    <label for="postSort">序号:</label>
                    <input id="postSort" type="text" class="form-control" maxlength="20" placeholder="请输入序号">
                </div>
                <div class="form-group">
                    <span class="text-danger">*</span>
                    <label for="postDec">岗位描述:</label>
                    <textarea id="postDec" type="text" class="form-control" placeholder="请输入岗位描述"></textarea>
                </div>
                <div class="form-group">
                    <label for="departmentStatus">是否启用:</label>
                    <input type="checkbox" id="postStatus" name="my-checkbox-post" data-on-text="启用"
                           data-off-text="不启用">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary" id="savePostBtn">
                    提交
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<!--部门modal-->
<div class="modal fade" id="modal-department-select">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">选择部门</h4>
            </div>

            <div class="modal-body">
                <ul class="tag">
                    <li class="active">部门分组</li>
                </ul>
                <div class="container">
                    <div class="tag-item clf">
                        <div class="tree-left fl">
                            <div class="tree-bg">
                                <input type="search" id="searchDepartment" placeholder="请输入">
                            </div>

                            <ul class="tree-box tree-box-ul" id="treePeople" style="height: 490px">
                                <div class="row" id="departmentTree"></div>
                                <li data-id="" onclick="selectPeople(event,this)">
                                    <span class="people-name"></span>
                                </li>
                            </ul>
                        </div>
                        <div class="fl transfer">
                            <div class="transfer-but transfer-right">>></div>
                            <div class="transfer-but transfer-left"><<</div>
                        </div>
                        <div class="fl tree-box ul-big" style="width: calc(100% - 780px)">
                            <ul class="tree-box-ul" id="treeSelected">

                            </ul>
                        </div>
                        <div class="fl transfer">
                            <div class="transfer-but transfer-up">上</div>
                            <div class="transfer-but transfer-down">下</div>
                        </div>
                    </div>
                    <div class="tag-item">

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="gain">确认</button>
            </div>
        </div>
    </div>
</div>

<!--组modal-->
<div class="modal fade" id="modal-group-select">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">选择部门</h4>
            </div>

            <div class="modal-body">
                <ul class="tag">
                    <li class="active">部门分组</li>
                </ul>
                <div class="container">
                    <div class="tag-item clf">
                        <div class="tree-left fl">
                            <div class="tree-bg">
                                <input type="search" id="searchGroup" placeholder="请输入">
                            </div>

                            <ul class="tree-box tree-box-ul" id="treeGroup" style="height: 490px">
                                <div class="row" id="groupTree"></div>
                                <li data-id="" onclick="selectPeople(event,this)">
                                    <span class="people-name"></span>
                                </li>
                            </ul>
                        </div>
                        <div class="fl transfer">
                            <div class="transfer-but transfer-right-group">>></div>
                            <div class="transfer-but transfer-left-group"><<</div>
                        </div>
                        <div class="fl tree-box ul-big" style="width: calc(100% - 780px)">
                            <ul class="tree-box-ul" id="treeGroupSelected">

                            </ul>
                        </div>
                        <div class="fl transfer">
                            <div class="transfer-but transfer-up">上</div>
                            <div class="transfer-but transfer-down">下</div>
                        </div>
                    </div>
                    <div class="tag-item">

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="gainGroup">确认</button>
            </div>
        </div>
    </div>
</div>

<!--选择人员modal-->
<div class="modal fade" id="modal-people-select">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">选择人员</h4>
            </div>
            <div class="modal-body">
                <ul class="tag" id="tag1">
                    <li class="active">部门</li>
                    <li onclick="loadGroupList()">组</li>
                    <li onclick="loadPostList()">岗位</li>
                </ul>
                <div class="container-i">
                    <div class="tag-item clf">
                        <div class="tree-left fl ren">
                            <div class="tree-box">
                                <div class="tree-top tc">
                                    <input class="tree-search" id="peopleDepartment" placeholder="请输入">
                                </div>
                                <ul class="tree-box tree-box-ul" style="height: 181px" id="peopleSelect">
                                </ul>
                            </div>
                            <div class="tree-top tree-margin">人员</div>
                            <ul class="tree-box tree-box-ul" id="departmentTreePeople"></ul>
                        </div>
                        <div class="tree-left fl zu" style="display: none">
                            <div class="tree-box">
                                <div class="tree-top tc">
                                    <input class="tree-search" id="peopleZu" placeholder="请输入">
                                </div>
                                <ul class="tree-box tree-box-ul" style="height: 181px" id="zuSelect">
                                </ul>
                            </div>
                            <div class="tree-top tree-margin">人员</div>
                            <ul class="tree-box tree-box-ul" id="zuTreePeople"></ul>
                        </div>
                        <div class="tree-left fl gang" style="display: none">
                            <div class="tree-box">
                                <div class="tree-top tc">
                                    <input class="tree-search" id="peopleGang" placeholder="请输入">
                                </div>
                                <ul class="tree-box tree-box-ul" style="height: 181px" id="gangSelect">
                                </ul>
                            </div>
                            <div class="tree-top tree-margin">人员</div>
                            <ul class="tree-box tree-box-ul" id="gangTreePeople"></ul>
                        </div>
                        <div class="fl transfer">
                            <div class="transfer-but transfer-right1">>></div>
                            <div class="transfer-but transfer-left1"><<</div>
                        </div>
                        <div class="fl tree-box ul-big" style="width: calc(100% - 500px)">
                            <ul class="tree-box-ul" id="sureSelected"></ul>
                        </div>
                        <div class="fl transfer">
                            <div class="transfer-but transfer-up1">上</div>
                            <div class="transfer-but transfer-down1">下</div>
                        </div>
                    </div>
                    <div class="tag-item"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="surePeopleSelect">确认</button>
            </div>
        </div>
    </div>
</div>

</body>

<th:block th:include="include :: footer"/>

<!--自定义js-->
<script th:src="@{/js/organization/department.js}"></script>
<script>
    var stateVal = 0;
    $("[name='my-checkbox']").bootstrapSwitch();
    $("[name='my-checkbox']").on('switchChange.bootstrapSwitch', function (event, state) {
        if (state) {
            stateVal = 0;
        }
        if (!state) {
            stateVal = 1;
        }
    });
    var departmentStateVal = 0;
    $("[name='my-checkbox-department']").bootstrapSwitch();
    $("[name='my-checkbox-department']").on('switchChange.bootstrapSwitch', function (event, state) {
        if (state) {
            departmentStateVal = 0;
        }
        if (!state) {
            departmentStateVal = 1;
        }
    });
    var postStateVal = 0;
    $("[name='my-checkbox-post']").bootstrapSwitch();
    $("[name='my-checkbox-post']").on('switchChange.bootstrapSwitch', function (event, state) {
        if (state) {
            postStateVal = 0;
        }
        if (!state) {
            postStateVal = 1;
        }
    });
    $("#tag1 li").click(function () {
        var index = $(this).index();
        $(this).addClass("active").siblings().removeClass("active");
        if (index == 0) {
            $(".ren").show();
            $(".gang").hide();
            $(".zu").hide()
        } else if (index == 1) {
            $(".ren").hide();
            $(".gang").hide();
            $(".zu").show();
        } else if (index == 2) {
            $(".ren").hide();
            $(".zu").hide();
            $(".gang").show();
        }
    });
    $(".tag2 li").click(function () {
        $(this).addClass("active").siblings().removeClass("active");
        var tagactive = $(this).index();
        $(".part .item").eq(tagactive).show().siblings().hide()
    });
</script>

</html>